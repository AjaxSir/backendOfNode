import{z as Ce,aP as Ee,s as F,w as M,Y as ge,aR as he,B as u,D as c,E as o,at as p,aa as C,N as d,O as n,H as a,au as k,av as _,a9 as K,J as B,a8 as E,aV as N,aQ as b,aW as V,b2 as Ie,aU as ee,aX as Be,aY as Se,b0 as ve,b1 as Fe,b5 as fe}from"../index.js";import{E as me}from"./overlay.js";import{h as ke,O as Q,l as Qe,z as G,E as Re,r as ye}from"./hookOfFlash.js";const Le=""+new URL("../assets/staright_arrow.png",import.meta.url).href,_e=""+new URL("../assets/straight_arrow_gray.png",import.meta.url).href,le="data:image/png;base64,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",ae="data:image/png;base64,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",m=U=>(ve("data-v-5a9b2f3b"),U=U(),Fe(),U),Ke={class:"otp-flash-title"},be={class:"config trans-channel"},Ue={class:"title"},Ye={class:"cont"},we=m(()=>o("span",{class:"required"},"*",-1)),Ve=m(()=>o("br",null,null,-1)),Ge=["src"],Je={key:1},Te={class:"config trans-channel"},De={class:"title"},Oe={class:"cont otp-ccont"},Me={class:"otp-before-flash-tips"},Ne=["innerHTML"],je={class:"tips"},xe={class:"required"},Pe={class:"origin-life"},He={class:"current-lifecycle"},Ze={class:"flash-process"},Xe=["src"],qe=["src"],We=["src"],ze=["src"],$e=["src"],el=["src"],ll={key:0,class:"flash-content"},al={class:"warning"},sl={class:"flash-item"},ol=m(()=>o("span",{class:"label"},[o("span",{class:"required"},"*"),d(" SBL ForceKey ")],-1)),tl={class:"sbr-flag"},nl={key:0,class:"flash-item"},il={class:"label"},ul=m(()=>o("span",{class:"required"},"*",-1)),cl={key:1,class:"flash-content otp-flash"},rl={class:"warning"},dl={key:0,class:"flash-item"},Al={class:"label"},pl=m(()=>o("span",{class:"required"},"*",-1)),Cl={key:1,class:"flash-item"},El={class:"label"},gl=m(()=>o("span",{class:"required"},"*",-1)),hl={class:"flash-content otp-flash"},Il={key:0,class:"flash-item"},Bl={class:"label"},Sl={key:0,class:"tips"},vl={class:"warning"},Fl={key:1,class:"tips"},fl={class:"otp-flash-info"},ml={key:0},kl={key:1},Ql=m(()=>o("span",null,"SBL ForceKey: ",-1)),Rl={key:2},yl={key:3},Ll={key:4},_l={key:5},Kl={key:6},bl={class:"verfy-code-cont"},Ul={class:"verfy-code"},Yl=m(()=>o("br",null,null,-1)),wl={key:7,class:"required"},Vl={class:"dialog-footer"},Gl=Ce({__name:"otpFlash",emits:["changeFlashing"],setup(U,{emit:se}){const{t:s}=Ee(),{isDeviceRefresh:j,deviceList:oe,getDeviceList:x}=ke(),te=se,J=F(!1),e=F({ForceKeyFlash:!1,DEVICE:"",LIFECYCLE:null,SBRAES:{KeyPath:"",EncrypoType:0},SBRHMAC:{KeyPath:"",EncrypoType:0},SBLVERIFY:{KeyPath:"",EncrypoType:0},USERROOT:{KeyPath:"",EncrypoType:0},VerificationCode:""}),R=F(!1),T=F(""),P=F(),ne=F(s("otpFlash.already_know_warning")),g=F(null),I=F([]),D=F([]),ie=()=>{j.value||x().then(()=>{e.value.DEVICE="",g.value=null,e.value.LIFECYCLE=null})},ue=M(()=>g.value!=null?["INIT","PILOT","MASS","FAIL","END","DEV"][g.value]:"");M(()=>Q.filter(i=>{var l;return(l=Q.find(r=>r.Value===g.value))==null?void 0:l.canFlashList.includes(i.Value)})||[]);const A=i=>I.value.includes(i)?s("otpFlash.written"):D.value.includes(i)?s("otpFlash.fetch_failed"):!1,ce=M(()=>{var i,l,r,h,v,f,w;if(!e.value.DEVICE)return!1;if((i=e.value.USERROOT)!=null&&i.KeyPath||e.value.LIFECYCLE==4&&P.value===ne.value)return!0;if(e.value.LIFECYCLE==5){if(e.value.ForceKeyFlash&&((l=e.value.SBLVERIFY)!=null&&l.KeyPath)||(r=e.value.SBLVERIFY)!=null&&r.KeyPath&&I.value.includes(102)||e.value.ForceKeyFlash&&I.value.includes(0))return!0}else if((e.value.LIFECYCLE==1||e.value.LIFECYCLE==2)&&((h=e.value.SBRHMAC)!=null&&h.KeyPath&&((v=e.value.SBRAES)!=null&&v.KeyPath)||(f=e.value.SBRHMAC)!=null&&f.KeyPath&&I.value.includes(5)||(w=e.value.SBRAES)!=null&&w.KeyPath&&I.value.includes(4)))return!0;return!1}),H=i=>{I.value=[],D.value=[],N.send({functionId:b.Protobuf.BSTFlashInterface.GetLifeStage,data:{DeviceNumber:i}}).then(l=>{if(l.Result){e.value.LIFECYCLE=l.LifeStage,g.value=l.LifeStage||0;for(let r in l.KeyStatus)l.KeyStatus[r]=="true"&&I.value.push(Number(r)),l.KeyStatus[r]=="failed"&&D.value.push(Number(r))}else V.error(l.message||s("otpFlash.fetch_error"),s("common.tips"),s("common.confirm"),""),e.value.LIFECYCLE=null,g.value=l.LifeStage||null})},re=()=>{e.value.LIFECYCLE&&[1,2,4,5].includes(e.value.LIFECYCLE)&&(R.value=!0,N.send({functionId:b.Protobuf.BSTFlashInterface.ObtainVerificationCode,data:{ModuleType:1}}).then(i=>{T.value=i.VerificationCode}))},Y=async i=>{e.value[i].KeyPath=await Ie.SelectSignPath()},de=()=>{if(T.value!==e.value.VerificationCode)return V.error(s("otpFlash.verfi_code_euual"),s("common.tips"),s("common.confirm"),"");ee.open(s("otpFlash.flash_ing_wait")),J.value=!0,N.send({functionId:b.Protobuf.BSTFlashInterface.OTPKeyFlash,data:e.value}).then(i=>{i.Result?V.success(s("common.flash_success"),void 0,void 0,""):V.error(i.message,void 0,void 0,""),P.value=""}).finally(()=>{ee.close(),R.value=!1,J.value=!1,H(e.value.DEVICE)})},y=i=>{var r;let l=["piece"];return(r=Q.find(h=>h.Value===g.value))!=null&&r.canFlashList.includes(i)?(i===e.value.LIFECYCLE?l.push("active"):l.push("available"),l):["piece","disabled"]},Ae=()=>{var r;let i=["merge-arrow"];if((((r=Q.find(h=>h.Value===g.value))==null?void 0:r.canFlashList)||[]).includes(b.Protobuf.LIFECYCLE.END))switch(e.value.LIFECYCLE){case 1:i.push("pilot-arr");break;case 2:i.push("mass-arr");break;case 4:g.value===1&&i.push("pilot-arr"),g.value===2&&i.push("mass-arr");break}return i},pe=()=>{let i=["part-arrow"];if(g.value===b.Protobuf.LIFECYCLE.DEV)switch(e.value.LIFECYCLE){case 1:i.push("to-polit");break;case 2:i.push("to-mass");break}else i=["part-arrow-gray"];return i},L=i=>{var l;(l=Q.find(r=>r.Value===g.value))!=null&&l.canFlashList.includes(i)&&(e.value.LIFECYCLE=i)};return ge(J,(i,l)=>{te("changeFlashing",i)}),he(()=>{x(!0)}),(i,l)=>{const r=Be,h=Re,v=ye,f=Se,w=me;return u(),c(k,null,[o("div",null,[o("div",Ke,[p(r,{class:"start-flash",disabled:!ce.value,onClick:re,type:"primary"},{default:C(()=>[d(n(a(s)("common.start_flash")),1)]),_:1},8,["disabled"])]),o("div",be,[o("div",Ue,n(a(s)("common.transport_channel")),1),o("div",Ye,[o("div",null,[o("span",null,[we,d(" "+n(a(s)("common.devide_number")),1)]),Ve,p(r,{onClick:ie,type:"primary",class:"refresh"},{default:C(()=>[a(j)?(u(),c("img",{key:0,src:a(Qe),alt:"",srcset:""},null,8,Ge)):(u(),c("span",Je,n(a(s)("common.refresh")),1))]),_:1}),p(v,{onChange:H,class:"device","popper-class":"select-class",modelValue:e.value.DEVICE,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.DEVICE=t),placeholder:a(s)("common.please_select")},{default:C(()=>[(u(!0),c(k,null,_(a(oe),t=>(u(),K(h,{key:t.Value,label:t.Name,value:t.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])])]),o("div",Te,[o("div",De,n(a(s)("otpFlash.life_stage_flash_item")),1),o("div",Oe,[o("div",Me,[o("h5",{innerHTML:a(s)("otpFlash.otp_flash_warning_tip")},null,8,Ne),o("h6",je,[o("span",xe,n(a(s)("otpFlash.warning"))+": ",1),d(n(a(s)("otpFlash.warning_of_change_life")),1)])]),o("div",Pe,[d(n(a(s)("otpFlash.current_life_stage"))+": ",1),o("span",He,n(ue.value),1)]),o("div",Ze,[o("div",{onClick:l[1]||(l[1]=t=>L(0)),class:B(y(0))}," INIT ",2),o("div",null,[g.value===0?(u(),c("img",{key:0,src:a(Le),alt:""},null,8,Xe)):(u(),c("img",{key:1,src:a(_e),alt:""},null,8,qe))]),o("div",{onClick:l[2]||(l[2]=t=>L(5)),class:B(y(5))}," DEV ",2),o("div",{class:B(pe())},[o("img",{src:a(le),alt:""},null,8,We),o("img",{class:"rotate-180 part",src:a(le),alt:""},null,8,ze),o("img",{src:a(ae),alt:""},null,8,$e),o("img",{class:"rotate-180 part",src:a(ae),alt:""},null,8,el)],2),o("div",null,[o("div",{onClick:l[3]||(l[3]=t=>L(2)),class:B(y(2))}," MASS ",2),o("div",{onClick:l[4]||(l[4]=t=>L(1)),class:B(y(1))}," PILOT ",2)]),o("div",{class:B(Ae())},null,2),o("div",{onClick:l[5]||(l[5]=t=>L(4)),class:B([y(4),"hide"])}," END ",2)]),e.value.LIFECYCLE===5?(u(),c("div",ll,[o("p",al,n(a(s)("otpFlash.before_dev_flash")),1),o("div",sl,[ol,p(v,{disabled:!!A(102),"popper-class":"select-class",modelValue:e.value.ForceKeyFlash,"onUpdate:modelValue":l[6]||(l[6]=t=>e.value.ForceKeyFlash=t),placeholder:a(s)("common.please_select")},{default:C(()=>[p(h,{label:a(s)("otpFlash.open"),value:!0},null,8,["label"]),p(h,{label:a(s)("otpFlash.close"),value:!1},null,8,["label"])]),_:1},8,["disabled","modelValue","placeholder"]),A(102)?(u(),c("span",{key:0,class:B(["required",I.value.includes(102)&&"white"])},"("+n(A(102))+")",3)):E("",!0),o("div",tl,n(a(s)("otpFlash.setting_SBR_flag")),1)]),e.value.SBLVERIFY?(u(),c("div",nl,[o("span",il,[ul,d(" SBL HMAC "+n(a(s)("otpFlash.key")),1)]),p(f,{disabled:!!A(0),"popper-class":"select-class",modelValue:e.value.SBLVERIFY.KeyPath,"onUpdate:modelValue":l[8]||(l[8]=t=>e.value.SBLVERIFY.KeyPath=t),placeholder:a(s)("common.please_select")},{prepend:C(()=>[p(v,{disabled:!!A(0),modelValue:e.value.SBLVERIFY.EncrypoType,"onUpdate:modelValue":l[7]||(l[7]=t=>e.value.SBLVERIFY.EncrypoType=t),"popper-class":"select-class",class:"prepend",placeholder:a(s)("common.please_select")},{default:C(()=>[(u(!0),c(k,null,_(a(G),(t,S)=>(u(),K(h,{key:S,label:t.Name,value:t.Value},null,8,["label","value"]))),128))]),_:1},8,["disabled","modelValue","placeholder"])]),_:1},8,["disabled","modelValue","placeholder"]),p(r,{disabled:!!A(0),class:"dev-btn",onClick:l[9]||(l[9]=t=>Y("SBLVERIFY"))},{default:C(()=>[d(n(a(s)("otpFlash.select_sign_file")),1)]),_:1},8,["disabled"]),A(0)?(u(),c("span",{key:0,class:B(["required",I.value.includes(0)&&"white"])},"("+n(A(0))+")",3)):E("",!0)])):E("",!0)])):E("",!0),e.value.LIFECYCLE===1||e.value.LIFECYCLE===2?(u(),c("div",cl,[o("p",rl,n(a(s)("otpFlash.before_mass_polit_tips")),1),e.value.SBRHMAC?(u(),c("div",dl,[o("span",Al,[pl,d(" SBR HMAC "+n(a(s)("otpFlash.key")),1)]),p(f,{disabled:!!A(4),"popper-class":"select-class",modelValue:e.value.SBRHMAC.KeyPath,"onUpdate:modelValue":l[11]||(l[11]=t=>e.value.SBRHMAC.KeyPath=t),placeholder:a(s)("common.please_select")},{prepend:C(()=>[p(v,{disabled:!!A(4),modelValue:e.value.SBRHMAC.EncrypoType,"onUpdate:modelValue":l[10]||(l[10]=t=>e.value.SBRHMAC.EncrypoType=t),"popper-class":"select-class",class:"prepend",placeholder:a(s)("common.please_select")},{default:C(()=>[(u(!0),c(k,null,_(a(G),(t,S)=>(u(),K(h,{key:S,label:t.Name,value:t.Value},null,8,["label","value"]))),128))]),_:1},8,["disabled","modelValue","placeholder"])]),_:1},8,["disabled","modelValue","placeholder"]),p(r,{disabled:!!A(4),onClick:l[12]||(l[12]=t=>Y("SBRHMAC"))},{default:C(()=>[d(n(a(s)("otpFlash.select_sign_file")),1)]),_:1},8,["disabled"]),A(4)?(u(),c("span",{key:0,class:B(["required",I.value.includes(4)&&"white"])},"("+n(A(4))+")",3)):E("",!0)])):E("",!0),e.value.SBRAES?(u(),c("div",Cl,[o("span",El,[gl,d(" SBR AES "+n(a(s)("otpFlash.key")),1)]),p(f,{disabled:!!A(5),"popper-class":"select-class",modelValue:e.value.SBRAES.KeyPath,"onUpdate:modelValue":l[14]||(l[14]=t=>e.value.SBRAES.KeyPath=t),placeholder:a(s)("common.please_select")},{prepend:C(()=>[p(v,{disabled:!!A(5),modelValue:e.value.SBRAES.EncrypoType,"onUpdate:modelValue":l[13]||(l[13]=t=>e.value.SBRAES.EncrypoType=t),"popper-class":"select-class",class:"prepend",placeholder:a(s)("common.please_select")},{default:C(()=>[(u(!0),c(k,null,_(a(G),(t,S)=>(u(),K(h,{key:S,label:t.Name,value:t.Value},null,8,["label","value"]))),128))]),_:1},8,["disabled","modelValue","placeholder"])]),_:1},8,["disabled","modelValue","placeholder"]),p(r,{disabled:!!A(5),onClick:l[15]||(l[15]=t=>Y("SBRAES"))},{default:C(()=>[d(n(a(s)("otpFlash.select_sign_file")),1)]),_:1},8,["disabled"]),A(5)?(u(),c("span",{key:0,class:B(["required",I.value.includes(5)&&"white"])},"("+n(A(5))+")",3)):E("",!0)])):E("",!0)])):E("",!0),o("div",hl,[e.value.USERROOT?(u(),c("div",Il,[o("span",Bl," User Root "+n(a(s)("otpFlash.key")),1),p(f,{disabled:!!A(1),"popper-class":"select-class",modelValue:e.value.USERROOT.KeyPath,"onUpdate:modelValue":l[17]||(l[17]=t=>e.value.USERROOT.KeyPath=t),placeholder:a(s)("common.please_select")},{prepend:C(()=>[p(v,{disabled:!!A(1),modelValue:e.value.USERROOT.EncrypoType,"onUpdate:modelValue":l[16]||(l[16]=t=>e.value.USERROOT.EncrypoType=t),"popper-class":"select-class",class:"prepend",placeholder:a(s)("common.please_select")},{default:C(()=>[(u(!0),c(k,null,_(a(G),(t,S)=>(u(),K(h,{key:S,label:t.Name,value:t.Value},null,8,["label","value"]))),128))]),_:1},8,["disabled","modelValue","placeholder"])]),_:1},8,["disabled","modelValue","placeholder"]),p(r,{disabled:!!A(1),onClick:l[18]||(l[18]=t=>Y("USERROOT"))},{default:C(()=>[d(n(a(s)("otpFlash.select_sign_file")),1)]),_:1},8,["disabled"]),A(1)?(u(),c("span",{key:0,class:B(["required",I.value.includes(1)&&"white"])},"("+n(A(1))+")",3)):E("",!0)])):E("",!0)])])])]),p(w,{modelValue:R.value,"onUpdate:modelValue":l[21]||(l[21]=t=>R.value=t),title:a(s)("otpFlash.flash_confirm"),width:"600px",class:"change-life-dialog","close-on-click-modal":!1,"show-close":!1},{footer:C(()=>[o("span",Vl,[p(r,{class:"dialog-btn cancel-btn",type:"primary",onClick:l[20]||(l[20]=t=>R.value=!1)},{default:C(()=>[d(n(a(s)("common.cancel_flash")),1)]),_:1}),p(r,{class:"dialog-btn confirm-btn",onClick:de,type:"primary"},{default:C(()=>[d(n(a(s)("common.continue_flash")),1)]),_:1})])]),default:C(()=>{var t,S,Z,X,q,W,z,$;return[e.value.LIFECYCLE!=g.value?(u(),c("p",Sl,[d(n(a(s)("otpFlash.confirm_change_to"))+" ",1),o("span",vl,n((t=a(Q).find(O=>O.Value===e.value.LIFECYCLE))==null?void 0:t.Label),1),d(" "+n(a(s)("otpFlash.flash_params")),1)])):(u(),c("p",Fl,n(a(s)("otpFlash.confirm_change_to_1"))+" "+n(a(s)("otpFlash.flash_params_1")),1)),o("div",fl,[e.value.LIFECYCLE===4?(u(),c("p",ml,[o("span",null,n(a(s)("common.devide_number"))+": ",1),d(" "+n(e.value.DEVICE),1)])):E("",!0),e.value.LIFECYCLE===5?(u(),c("p",kl,[Ql,d(" "+n(e.value.ForceKeyFlash?a(s)("otpFlash.open"):a(s)("otpFlash.close")),1)])):E("",!0),e.value.LIFECYCLE===5?(u(),c("p",Rl,[o("span",null,"SBL HMAC"+n(a(s)("otpFlash.key"))+":",1),d(" "+n(((S=e.value.SBLVERIFY)==null?void 0:S.KeyPath)||"None"),1)])):E("",!0),e.value.LIFECYCLE===1||e.value.LIFECYCLE===2?(u(),c("p",yl,[o("span",null,"SBR HMAC"+n(a(s)("otpFlash.key"))+":",1),d(" "+n(((Z=e.value.SBRHMAC)==null?void 0:Z.KeyPath)||"None"),1)])):E("",!0),e.value.LIFECYCLE===1||e.value.LIFECYCLE===2?(u(),c("p",Ll,[o("span",null,"SBR AES"+n(a(s)("otpFlash.key"))+":",1),d(" "+n(((X=e.value.SBRAES)==null?void 0:X.KeyPath)||"None"),1)])):E("",!0),(q=e.value.USERROOT)!=null&&q.KeyPath?(u(),c("p",_l,[o("span",null,"USER ROOT"+n(a(s)("otpFlash.key"))+":",1),d(" "+n((W=e.value.USERROOT)==null?void 0:W.KeyPath),1)])):E("",!0),(z=e.value.USERROOT)!=null&&z.KeyPath?(u(),c("p",Kl,[o("span",null,"USER ROOT"+n(a(s)("otpFlash.key"))+":",1),d(" "+n(($=e.value.USERROOT)==null?void 0:$.KeyPath),1)])):E("",!0),o("span",bl,[d(n(a(s)("otpFlash.verfi_code"))+": ",1),o("span",Ul,n(T.value),1)]),p(f,{modelValue:e.value.VerificationCode,"onUpdate:modelValue":l[19]||(l[19]=O=>e.value.VerificationCode=O)},null,8,["modelValue"]),Yl,e.value.LIFECYCLE!=g.value?(u(),c("span",wl,n(a(s)("otpFlash.error_change_life_tips")),1)):E("",!0)])]}),_:1},8,["modelValue","title"])],64)}}});const Ol=fe(Gl,[["__scopeId","data-v-5a9b2f3b"]]);export{Ol as default};
